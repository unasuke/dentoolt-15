<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>sinatraã‚’railsã«ã®ã›ã‚‹</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
        <section data-markdown>
          <script type="text/template">
            # sinatraã‚’railsã«ã®ã›ã‚‹

            2016-10-23 Dentoo.LT #15

            ã†ãªã™ã‘
          </script>
        </section>
        <section data-markdown data-background-image='img/icon.jpg'>
          <script type="text/template">
            ## èª°

            - ã†ãªã™ã‘
            - æ ªå¼ä¼šç¤¾spice lifeæ‰€å±
            - é–‹ç™ºéƒ¨ TMIXé–‹ç™ºæ‹…å½“ ã‚¤ãƒ³ãƒ•ãƒ©éƒ¨æ‰€å±
          </script>
        </section>
        <section data-markdown data-background-image='img/spicelife.png'>
          <script type="text/template">
          </script>
        </section>
        <section data-markdown data-background-image='img/tmix.png'>
          <script type="text/template">
          </script>
        </section>
        <section data-markdown data-background-image='img/icon.jpg'>
          <script type="text/template">
            ## èª°

            - ã†ãªã™ã‘
            - æ ªå¼ä¼šç¤¾spice lifeæ‰€å±
            - é–‹ç™ºéƒ¨ TMIXé–‹ç™ºæ‹…å½“ ã‚¤ãƒ³ãƒ•ãƒ©éƒ¨æ‰€å±
          </script>
        </section>
        <section>
          <h2>æ‰€æŒãƒ‰ãƒ¡ã‚¤ãƒ³</h2>
          <img src='img/my-domains.png' style='height:550px;'>
        </section>
        <section>
          <h2>æ‰€æŒãƒ‰ãƒ¡ã‚¤ãƒ³</h2>
          <img src='img/my-domains-highlight.png' style='height:550px;'>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## æŒ™æ‰‹ã—ã¦ã‚‚ã‚‰ã„ã¾ã™
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## é«˜å°‚ã‚’çŸ¥ã£ã¦ã„ã‚‹äºº
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ãƒ­ãƒœã‚³ãƒ³ã‚’çŸ¥ã£ã¦ã„ã‚‹äºº
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ãƒ—ãƒ­ã‚³ãƒ³ã‚’çŸ¥ã£ã¦ã„ã‚‹äºº
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## Proconist.netã‚’çŸ¥ã£ã¦ã„ã‚‹äºº
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## Proconist.net

            ![Proconist.net](img/proconist-net.png)

            [https://proconist.net/](https://proconist.net/)
          </script>
        </section>
        <section data-markdown data-background-image='img/proconist-net-background.png'>
          <script type="text/template">
            ## ãƒ—ãƒ­ã‚³ãƒ³ã§
            ## ã‚¢ãƒƒãƒ—ã‚¹ãƒ‘ã‚¤ãƒ©ãƒ«ã‚’
            ## ç”Ÿã¿å‡ºã™
          </script>
        </section>
        <section data-markdown data-background-image='img/proconist-net-repository.png'>
          <script type="text/template">
            ## This
            ## is
            ## sinatra
            ## application

            [https://github.com/NKMR6194/proconist.net](https://github.com/NKMR6194/proconist.net)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ![sinatra is rails](img/benevolent0505-tweet.png)

            <small>
              [https://twitter.com/benevolent0505/status/787702616574701570](https://twitter.com/benevolent0505/status/787702616574701570)
            </small>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã˜ã‚ƒã‚
            ## Railsã§æ›¸ãç›´ã›ã°
            ## ã„ã„ã˜ã‚ƒã‚“
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ç™ºç«¯
            <small>
              [https://github.com/NKMR6194/proconist.net/issues/46](https://github.com/NKMR6194/proconist.net/issues/46)
            </small>
            ![railsnize](img/issue-46.png)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ã¦ã„ãã¾ã—ã‚‡ã†
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ã¦ã„ãå‰ã«
            ### ç¾çŠ¶ã®æŠŠæ¡
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### ç¾çŠ¶ã®æŠŠæ¡
            #### application

            - 8 models
            - 52 endpoints
            - 34 view files
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### ç¾çŠ¶ã®æŠŠæ¡
            #### infrastructure

            - sinatra
            - SQLite
            - unicorn
            - nginx
            - on ã•ãã‚‰ã®VPS
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã•ã¦ã€ã‚„ã£ã¦ã„ã
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨

            1. DB æ­£è¦åŒ–
            1. model åˆ†å‰²
            1. specã‚’æ›¸ã
            1. CIå°å…¥
            1. erb -> slim
            1. SQLite -> MySQL
            1. unicorn -> puma
            1. ã²ãŸã™ã‚‰controllerã¤ãã‚‹
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### DB æ­£è¦åŒ–
            sinatra
            ```ruby
create_table "entrants", force: true do |t|
  t.integer "contest",      null: false
  t.integer "section",      null: false
  t.integer "registry_num", null: false
  t.string  "school",       null: false
  t.string  "production",   null: false
  t.string  "github"
  t.string  "bitbucket"
  t.string  "other_repo"
  t.string  "slideshare"
  t.string  "other_slide"
  t.string  "twitter"
  t.string  "facebook"
  t.string  "site"
  t.integer "result"
  t.string  "prize"
end

            ```
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### DB æ­£è¦åŒ–
            rails (timestampã€optionã€indexçœç•¥)
            ```ruby
create_table "products", force: :cascade do |t|
  t.integer  "contest_id", null: false
  t.integer  "section",    null: false
  t.integer  "school_id",  null: false
  t.string   "name",       null: false
  t.integer  "rank"
end

create_table "documents", force: :cascade do |t|
  t.integer  "product_id",    null: false
  t.string   "document_type", null: false
  t.string   "url",           null: false
end

create_table "prizes", force: :cascade do |t|
  t.integer  "product_id", null: false
  t.string   "name",       null: false
end
            ```
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### DB æ­£è¦åŒ–

            8 tables -> 11 tables
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### specã‚’æ›¸ã
            
            sinatraã®ã¨ãã®spec -> 0

            railsã®spec - > Coverage 89%

            <small>
              ã¾ã ã¾ã ãŸã‚Šãªã„â€¦â€¦
            </small>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### CIå°å…¥
            
            ![https://app.wercker.com/unasuke/proconist.net/runs](img/wercker-proconist.png)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### erb -> slim
            
            sinatra

            ![erb](img/proconist-master-views.png)
            
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### erb -> slim
            
            34 erbs -> 42 slims, and 1 erb
            
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### SQLite -> MySQL
            
            sinatra
            ```ruby
ActiveRecord::Base.establish_connection(
  "adapter" => "sqlite3",
  "database" => ENV['DB'] || "./proconist.db")
            ```
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### SQLite -> MySQL
            
            rails
            ```yaml
default: &default
  adapter: mysql2
  encoding: utf8mb4
  charset: utf8mb4
  collation: utf8mb4_general_ci
  pool: 5
  username: root
  password:
  host: localhost
            ```

            ğŸ£ğŸºã€ãƒãƒãƒ‘ãƒ‘å¯¾å¿œ
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### unicorn -> puma
            
            rails 5ã§ rails newã—ãŸã‚‰pumaã ã£ãŸã‹ã‚‰â€¦â€¦
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### ã²ãŸã™ã‚‰controllerã¤ãã‚‹
            
            sinatra

            app.rbãŒã‚ã‚‹ã ã‘
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### ã²ãŸã™ã‚‰controllerã¤ãã‚‹
            
            rails

            17 controllers ğŸ˜¨
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### ã²ãŸã™ã‚‰controllerã¤ãã‚‹
            
            sinatra

            <img src="img/create-entry-sinatra.png" width="60%" alt="sinatra">
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### ã²ãŸã™ã‚‰controllerã¤ãã‚‹
            
            rails

            <img src="img/create-product-rails.png" width="50%" alt="rails">
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸã“ã¨
            ### ã²ãŸã™ã‚‰controllerã¤ãã‚‹
            <img src="img/emoji-innocent.png" width="10%" alt="innocent">

            <small>
              ãƒ˜ã‚¿ã«æ­£è¦åŒ–ãªã‚“ã‹ã™ã‚‹ã‹ã‚‰â€¦â€¦
            </small>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## (ã‚„ã‚‰|ã§ã)ãªã‹ã£ãŸã“ã¨
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## (ã‚„ã‚‰|ã§ã)ãªã‹ã£ãŸã“ã¨

            - on AWS
            - Dockerize
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## (ã‚„ã‚‰|ã§ã)ãªã‹ã£ãŸã“ã¨
            ### on AWS

            åŒæ–¹(NKMR6194æ°ã¨åƒ•)ã®åŠ´åŠ›ã‚’è€ƒãˆã‚‹ã¨
            
            AWSã—ãªã„ã»ã†ãŒæ¥½

            - certificate
            - domain(proconist.net)
            - CDN
            - etc...
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## (ã‚„ã‚‰|ã§ã)ãªã‹ã£ãŸã“ã¨
            ### Dockerize

            - AWSã«ä¹—ã›ãªã‹ã£ãŸã‹ã‚‰æµã‚Œã§ãƒŠã‚·ã«
            - ãã‚‚ãã‚‚rails appã®Dockerizeã¯â€¦â€¦
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã“ã‚Œã‹ã‚‰ã‚„ã‚‹ã“ã¨
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã“ã‚Œã‹ã‚‰ã‚„ã‚‹ã“ã¨

            - specã®ä¸è¶³ã‚’è£œã†
            - refactoring
              - ä»Šæœˆä¸­ã«ã‚„ã‚ŠãŸãã¦æ€¥ã„ã§ãŸã®ã§â€¦â€¦
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## railsç§»è¡Œãµã‚Šã‹ãˆã‚Š
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## railsç§»è¡Œãµã‚Šã‹ãˆã‚Š
            ### bin/rails stats

            <img src='img/bin-rails-stats.png' width="70%" alt='bin/rails stats'>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## railsç§»è¡Œãµã‚Šã‹ãˆã‚Š
            ### commits

            174 commits, 354 file changes

            <img src='img/compare-master-and-rails.png' alt='compare'>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## railsç§»è¡Œãµã‚Šã‹ãˆã‚Š
            ### add/delete

            <p>
             17,695 addition, 13,865 deletion 
            </p>

            <img src='img/unasuke-additon-and-deletion.png' alt='addition and deletion'>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã¾ã¨ã‚

            - ãŸã„ã¸ã‚“ã ã£ãŸ
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ãŠã¾ã‘
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸæ­´å²
            ### commit logã‚’ãµã‚Šã‹ãˆã‚‹
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## ã‚„ã£ãŸæ­´å²
            ### 2016å¹´06æœˆ

            issueçˆ†èª•

            [https://github.com/NKMR6194/proconist.net/issues/46](https://github.com/NKMR6194/proconist.net/issues/46)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´06æœˆ

            modelã®è©±ãªã©

            ![issue comments](img/issue-46-comments.png)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´06æœˆ08æ—¥ã€09æ—¥

            - æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ `sinatra/`ä»¥ä¸‹ã«ç§»å‹•
            - `% rails new`
            - contest modelä½œæˆ
            - åŸºç¤çš„ãªrouteingå®šç¾©
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´06æœˆ10æ—¥

            - /index, /about ã‚’ç§»è¡Œ
            - product, document modelsä½œæˆ
            - specã‚„debugã®ãŸã‚ã®gemã‚’install
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´06æœˆ11æ—¥ã€12æ—¥ã€13æ—¥

            - wercker.ymlä½œæˆ
            - rubocopå°å…¥
            - coverallså°å…¥
            - æ—¢å­˜DBã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’æµã—è¾¼ã‚€scriptä½œæˆ
            - decoratorå°å…¥
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´06æœˆ14æ—¥ã€15æ—¥ã€16æ—¥

            - ã„ãã¤ã‹ã®decoratorä½œæˆ
            - prize modelä½œæˆ
            - indexã®ä¿®å¾©
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´06æœˆ17æ—¥ã€18æ—¥ã€19æ—¥

            - bundle update
            - ruby 2.3.1
            - contests#index, contests#show
            - imageã®ç§»è¡Œ
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´06æœˆ24æ—¥ã€26æ—¥ã€30æ—¥

            - rails 5.0.0.rc2
            - sessions controller
            - sign_in viewã®ç§»è¡Œ
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´07æœˆ01æ—¥ã€3æ—¥

            - rails 5.0.0
            - rubocopã®ä¿®æ­£
            - ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´08æœˆ18æ—¥

            - bundle update

            <small>
              ã“ã®è¾ºã‹ã‚‰åœæ»ã™ã‚‹
            </small>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´09æœˆ22æ—¥

            - idobataã¸ã®é€šçŸ¥
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´09æœˆ29æ—¥ã€30æ—¥

            - uni-railsã®merge
            - titleã‚¿ã‚°ã®ä¿®æ­£
            - ogpé–¢é€£ã®æ©Ÿèƒ½ç§»è¡Œ
            - favicon
            - ç®¡ç†ç”»é¢ã®ç§»è¡Œé–‹å§‹

            <small>
              ã“ã®è¾ºã‹ã‚‰ç„¦ã‚Šå§‹ã‚ã‚‹
            </small>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´10æœˆ01æ—¥

            - article modelé–¢ä¿‚ã®å®Ÿè£…
              - redcarpet
            - partialã®èª¿æ•´
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´10æœˆ05æ—¥ã€08æ—¥ã€09æ—¥

            - werckerã®logèª¿æ•´
            - report modelä½œæˆ
            - reportã®ä½œæˆã€ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
            - gitterã¸ã®é€šçŸ¥ä½œæˆ
            - web fontã®ç§»è¡Œ
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´10æœˆ10æ—¥ã€13æ—¥ã€14æ—¥

            - history modelä½œæˆ
            - ç®¡ç†ç”»é¢ç”¨ã®controllersã‚’ä½œæˆ
            - sidebarã‚’partialã¨ã—ã¦åˆ‡ã‚Šå‡ºã™
            - typoä¿®æ­£
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´10æœˆ15æ—¥

            - turbolinksã‚’ç„¡åŠ¹ã«
            - è¨˜äº‹ã‚«ãƒ†ã‚´ãƒªã¸ã®URLå®Ÿè£…
            - è¨˜äº‹ç”»é¢ä½œæˆ
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´10æœˆ16æ—¥

            - ã²ãŸã™ã‚‰ç®¡ç†ç”»é¢
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### 2016å¹´10æœˆ17æ—¥ã€18æ—¥ã€19æ—¥

            - MySQLç§»è¡Œ
              - werckerã§MySQLã™ã‚‹ã®ã«æ‰‹ã“ãšã‚‹
          </script>
        </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
